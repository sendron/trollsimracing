{"version":3,"sources":["selectors/flags.js","fallback_flags.js","App.js","query-configs/flags.js","store.js","index.js"],"names":["getFlags","state","entities","flags","fallbackFlags","App","React","useState","selectedFlags","setSelectedFlags","useSelector","flagsSelectors","flagsSum","setFlagsSum","all","setAll","reverse","setReverse","useRequest","url","transform","body","update","prev","next","isPending","status","useEffect","console","log","clones","clone","list","s","decode","parseFloat","length","alert","response","forEach","flag","selected","value","Fragment","className","style","width","map","el","i","type","id","checked","onChange","e","target","htmlFor","name","onClick","prompt","sum","selectedValues","JSON","parse","stringify","push","indexOf","reducer","combineReducers","entitiesReducer","queries","queriesReducer","store","createStore","applyMiddleware","queryMiddleware","superagentInterface","getQueries","ReactDOM","render","StrictMode","queriesSelector","document","getElementById"],"mappings":"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","file":"static/js/main.46db728d.chunk.js","sourcesContent":["export const getFlags = state => state.entities.flags;","const fallbackFlags = \n{\n    \"result\" : \"ok\",\n    \"response\" : {\n      \"description\" : \"Flags from session settings\",\n      \"list\" : [\n        {\n          \"value\" : 2,\n          \"name\" : \"FORCE_IDENTICAL_VEHICLES\"\n        },\n        {\n          \"value\" : 8,\n          \"name\" : \"ALLOW_CUSTOM_VEHICLE_SETUP\"\n        },\n        {\n          \"value\" : 16,\n          \"name\" : \"FORCE_REALISTIC_DRIVING_AIDS\"\n        },\n        {\n          \"value\" : 32,\n          \"name\" : \"ABS_ALLOWED\"\n        },\n        {\n          \"value\" : 64,\n          \"name\" : \"SC_ALLOWED\"\n        },\n        {\n          \"value\" : 128,\n          \"name\" : \"TCS_ALLOWED\"\n        },\n        {\n          \"value\" : 256,\n          \"name\" : \"FORCE_MANUAL\"\n        },\n        {\n          \"value\" : 512,\n          \"name\" : \"FORCE_SAME_VEHICLE_CLASS\"\n        },\n        {\n          \"value\" : 1024,\n          \"name\" : \"FORCE_MULTI_VEHICLE_CLASS\"\n        },\n        {\n          \"value\" : 131072,\n          \"name\" : \"FILL_SESSION_WITH_AI\"\n        },\n        {\n          \"value\" : 262144,\n          \"name\" : \"MECHANICAL_FAILURES\"\n        },\n        {\n          \"value\" : 524288,\n          \"name\" : \"AUTO_START_ENGINE\"\n        },\n        {\n          \"value\" : 1048576,\n          \"name\" : \"TIMED_RACE\"\n        },\n        {\n          \"value\" : 4194304,\n          \"name\" : \"PASSWORD_PROTECTED\"\n        },\n        {\n          \"value\" : 8388608,\n          \"name\" : \"ONLINE_REPUTATION_ENABLED\"\n        },\n        {\n          \"value\" : 16777216,\n          \"name\" : \"WAIT_FOR_RACE_READY_INPUT\"\n        },\n        {\n          \"value\" : 33554432,\n          \"name\" : \"HAS_RACE_DIRECTOR\"\n        },\n        {\n          \"value\" : 67108864,\n          \"name\" : \"HAS_BROADCASTER\"\n        },\n        {\n          \"value\" : 134217728,\n          \"name\" : \"PIT_SPEED_LIMITER\"\n        },\n        {\n          \"value\" : 268435456,\n          \"name\" : \"PIT_STOP_ERRORS_ALLOWED\"\n        },\n        {\n          \"value\" : 536870912,\n          \"name\" : \"DISABLE_DRIVING_LINE\"\n        },\n        {\n          \"value\" : 1073741824,\n          \"name\" : \"ANTI_GRIEFING_COLLISIONS\"\n        },\n        {\n          \"value\" : -2147483648,\n          \"name\" : \"COOLDOWNLAP\"\n        }\n      ]\n    }\n  };\n\n  export { fallbackFlags };","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { useRequest } from 'redux-query-react';\nimport * as flagsQueryConfigs from './query-configs/flags';\nimport * as flagsSelectors from './selectors/flags';\nimport {fallbackFlags} from './fallback_flags';\n\nconst App = () => {\n\tconst [selectedFlags, setSelectedFlags] = React.useState([]);\n\tconst flags = useSelector(flagsSelectors.getFlags);\n\tconst [flagsSum, setFlagsSum] = React.useState(0);\n\tconst [all, setAll] = React.useState(true);\n\tconst [reverse, setReverse] = React.useState(null);\n\tconst [{ isPending, status }] = useRequest(flagsQueryConfigs.flagsRequest());\n\n\tReact.useEffect(()=>{\n\t\tif(typeof status === 'number' && status >= 400){\n\t\t\tconsole.log('Using fallbackFlags.');\n\t\t\tlet clones = clone(fallbackFlags.response.list);\n\t\t\tsetSelectedFlags(clones);\n\t\t}\n\t},[status]);\n\n\tReact.useEffect(() => {\n\t\tif (reverse) {\n\t\t\tlet s = decode(selectedFlags, parseFloat(reverse));\n\t\t\tif (s.length)\n\t\t\t\tsetSelectedFlags(s);\n\t\t\telse\n\t\t\t\talert('You entered invalid flag sum. It contains values not in the session flag list. Could not decode it sorry.');\n\n\t\t\tsetReverse(null);\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [reverse])\n\n\tReact.useEffect(() => {\n\t\tif (flags) {\n\t\t\tlet clones = clone(flags.response.list);\n\t\t\tsetSelectedFlags(clones);\n\t\t}\n\t}, [flags]);\n\n\tReact.useEffect(() => {\n\t\tif (selectedFlags) {\n\t\t\tlet flagsSum = 0;\n\t\t\tselectedFlags.forEach((flag) => {\n\t\t\t\tif (flag.selected)\n\t\t\t\t\tflagsSum = flagsSum + flag.value\n\t\t\t});\n\t\t\tsetFlagsSum(flagsSum);\n\t\t}\n\t}, [selectedFlags])\n\n\tif (isPending)\n\t\treturn <p>Loading data</p>;\n\n\tif (selectedFlags.length)\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<h1>Session flags: {flagsSum}</h1>\n\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th style={{ width: '250px' }}>Flag</th>\n\t\t\t\t\t\t\t\t\t\t<th>Value</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t{selectedFlags.map((el, i) =>\n\t\t\t\t\t\t\t\t\t\t<tr className={`${(i % 2 === 0 ? 'even' : 'odd')}`} key={`table-row-${i}`}>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" className=\"form-check-input\" id={`check-${i}`} checked={el.selected}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedFlags(selectedFlags.map((flag) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (flag.value === el.value)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn ({ ...flag, selected: e.target.checked })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn flag;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<label className=\"form-check-label\" htmlFor={`check-${i}`}>{el.name}</label>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"\">{el.value}</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tsetSelectedFlags(selectedFlags.map((flag) => {\n\t\t\t\t\t\t\t\t\t\treturn ({ ...flag, selected: all })\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\tsetAll(!all);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAll toggle\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tsetReverse(prompt('Enter sum of flags for decoding.'));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>Reverse sum</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t)\n\n\treturn <p>Could not initiate application. Please try later.</p>;\n}\nexport default App;\n\nconst clone = (list) => {\n\treturn list.map((flag) => {\n\t\treturn ({\n\t\t\t...flag,\n\t\t\tselected: false\n\t\t})\n\t});\n}\n\nconst decode = (flags, sum) => {\n\tif (flags.length) {\n\t\tlet selectedValues = [];\n\t\tlet decodeFlags = JSON.parse(JSON.stringify(flags)).reverse(); // Make sure its ordered\n\t\tdecodeFlags.forEach((flag, i) => {\n\t\t\t// For positive values\n\t\t\tif (flag.value > 0) {\n\t\t\t\t// console.log((sum - flag.value))\n\t\t\t\tif (sum - flag.value >= 0 && sum !== 0) {\n\t\t\t\t\tselectedValues.push(flag.value);\n\t\t\t\t\tsum = sum - flag.value;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// For negative values \n\t\t\telse {\n\t\t\t\tif (sum < 0) {\n\t\t\t\t\tselectedValues.push(flag.value);\n\t\t\t\t\tsum = sum - flag.value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (sum === 0)\n\t\t\treturn flags.map((flag) => {\n\t\t\t\treturn ({ ...flag, selected: selectedValues.indexOf(flag.value) !== -1 })\n\t\t\t});\n\t\telse\n\t\t\treturn []\n\t}\n};","export const flagsRequest = () => {\n    return {\n      url: `https://api.trollsimracing.no:8080/availableflags`,\n      transform: body => ({\n        flags: body,\n      }),\n      update: {\n        flags: (prev, next) => {\n          return next;\n        },\n      },\n    };\n  }","import { applyMiddleware, createStore, combineReducers } from 'redux';\nimport { entitiesReducer, queriesReducer, queryMiddleware } from 'redux-query';\nimport superagentInterface from 'redux-query-interface-superagent';\n\nexport const getQueries = state => state.queries;\nexport const getEntities = state => state.entities;\n\nconst reducer = combineReducers({\n  entities: entitiesReducer,\n  queries: queriesReducer,\n});\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(queryMiddleware(superagentInterface, getQueries, getEntities)),\n);\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { Provider as ReduxQueryProvider } from 'redux-query-react';\nimport App from './App';\nimport store from './store';\n\nimport './index.css';\n\nexport const getQueries = state => state.queries;\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ReduxQueryProvider queriesSelector={getQueries}>\n        <App />\n      </ReduxQueryProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// const webp = e => document.createElement('canvas').toDataURL('image/webp').indexOf('data:image/webp') === 0;\n\n// if(!webp())\n//   document.body.classList.add('no-webp');"],"sourceRoot":""}