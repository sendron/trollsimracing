(this["webpackJsonpams2-session-flags"]=this["webpackJsonpams2-session-flags"]||[]).push([[0],{61:function(e,t,c){},62:function(e,t,c){"use strict";c.r(t),c.d(t,"getQueries",(function(){return g}));var n=c(0),s=c.n(n),a=c(8),r=c.n(a),i=c(3),l=c(10),u=c(4),o=c(6),j=function(e){return e.entities.flags},d=c(1),b=function(){var e=s.a.useState([]),t=Object(o.a)(e,2),c=t[0],n=t[1],a=Object(i.useSelector)(j),r=s.a.useState(0),b=Object(o.a)(r,2),h=b[0],O=b[1],v=s.a.useState(!0),m=Object(o.a)(v,2),x=m[0],p=m[1],g=s.a.useState(null),k=Object(o.a)(g,2),S=k[0],N=k[1];return Object(l.useRequest)({url:"https://api.trollsimracing.no:8080/availableflags",transform:function(e){return{flags:e}},update:{flags:function(e,t){return t}}}),s.a.useEffect((function(){if(S){var e=f(c,parseFloat(S));e.length?n(e):alert("You entered invalid flag sum. It contains values not in the session flag list. Could not decode it sorry."),N(null)}}),[S]),s.a.useEffect((function(){if(a){var e=a.response.list.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{selected:!1})}));n(e)}}),[a]),s.a.useEffect((function(){if(c){var e=0;c.forEach((function(t){t.selected&&(e+=t.value)})),O(e)}}),[c]),a?Object(d.jsx)(s.a.Fragment,{children:Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col",children:[Object(d.jsxs)("h1",{children:["Session flags: ",h]}),Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{style:{width:"250px"},children:"Flag"}),Object(d.jsx)("th",{children:"Value"})]})}),Object(d.jsx)("tbody",{children:c.map((function(e,t){return Object(d.jsxs)("tr",{className:"".concat(t%2===0?"even":"odd"),children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("input",{type:"checkbox",className:"form-check-input",id:"check-".concat(t),checked:e.selected,onChange:function(t){n(c.map((function(c){return c.value===e.value?Object(u.a)(Object(u.a)({},c),{},{selected:t.target.checked}):c})))}}),Object(d.jsx)("label",{className:"form-check-label",htmlFor:"check-".concat(t),children:e.name})]}),Object(d.jsx)("td",{className:"",children:e.value})]},"table-row-".concat(t))}))})]}),Object(d.jsx)("button",{onClick:function(){n(c.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{selected:x})}))),p(!x)},children:"All toggle"}),Object(d.jsx)("button",{onClick:function(){N(prompt("Enter sum of flags for decoding."))},children:"Reverse sum"})]})})})}):Object(d.jsx)("p",{children:"Loading data"})},f=function(e,t){if(e.length){var c=[];return JSON.parse(JSON.stringify(e)).reverse().forEach((function(e,n){e.value>0?t-e.value>=0&&0!==t&&(c.push(e.value),t-=e.value):t<0&&(c.push(e.value),t-=e.value)})),0===t?e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{selected:-1!==c.indexOf(e.value)})})):[]}},h=c(11),O=c(2),v=c(22),m=c.n(v),x=Object(h.b)({entities:O.entitiesReducer,queries:O.queriesReducer}),p=Object(h.c)(x,Object(h.a)(Object(O.queryMiddleware)(m.a,(function(e){return e.queries}),(function(e){return e.entities})))),g=(c(61),function(e){return e.queries});r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(i.Provider,{store:p,children:Object(d.jsx)(l.Provider,{queriesSelector:g,children:Object(d.jsx)(b,{})})})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.3d2282b3.chunk.js.map