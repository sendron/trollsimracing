(this["webpackJsonpams2-session-flags"]=this["webpackJsonpams2-session-flags"]||[]).push([[0],{61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t),n.d(t,"getQueries",(function(){return A}));var a=n(0),c=n.n(a),s=n(8),l=n.n(s),i=n(3),r=n(10),u=n(4),o=n(6),O=function(e){return e.entities.flags},j={description:"Flags from session settings",list:[{value:2,name:"FORCE_IDENTICAL_VEHICLES"},{value:8,name:"ALLOW_CUSTOM_VEHICLE_SETUP"},{value:16,name:"FORCE_REALISTIC_DRIVING_AIDS"},{value:32,name:"ABS_ALLOWED"},{value:64,name:"SC_ALLOWED"},{value:128,name:"TCS_ALLOWED"},{value:256,name:"FORCE_MANUAL"},{value:512,name:"FORCE_SAME_VEHICLE_CLASS"},{value:1024,name:"FORCE_MULTI_VEHICLE_CLASS"},{value:131072,name:"FILL_SESSION_WITH_AI"},{value:262144,name:"MECHANICAL_FAILURES"},{value:524288,name:"AUTO_START_ENGINE"},{value:1048576,name:"TIMED_RACE"},{value:4194304,name:"PASSWORD_PROTECTED"},{value:8388608,name:"ONLINE_REPUTATION_ENABLED"},{value:16777216,name:"WAIT_FOR_RACE_READY_INPUT"},{value:33554432,name:"HAS_RACE_DIRECTOR"},{value:67108864,name:"HAS_BROADCASTER"},{value:134217728,name:"PIT_SPEED_LIMITER"},{value:268435456,name:"PIT_STOP_ERRORS_ALLOWED"},{value:536870912,name:"DISABLE_DRIVING_LINE"},{value:1073741824,name:"ANTI_GRIEFING_COLLISIONS"},{value:-2147483648,name:"COOLDOWNLAP"}]},d=n(1),f=function(){var e=c.a.useState([]),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(i.useSelector)(O),l=c.a.useState(0),f=Object(o.a)(l,2),m=f[0],v=f[1],h=c.a.useState(!0),_=Object(o.a)(h,2),I=_[0],S=_[1],A=c.a.useState(null),L=Object(o.a)(A,2),g=L[0],C=L[1],R=Object(r.useRequest)({url:"https://api.trollsimracing.no:8080/availableflags",transform:function(e){return{flags:e}},update:{flags:function(e,t){return t}}}),p=Object(o.a)(R,1)[0],x=p.isPending,N=p.status;return c.a.useEffect((function(){if("number"===typeof N&&N>=400){console.log("Using fallbackFlags.");var e=b(j.list);a(e)}}),[N]),c.a.useEffect((function(){if(g){var e=E(n,parseFloat(g));e.length?a(e):alert("You entered invalid flag sum. It contains values not in the session flag list. Could not decode it sorry."),C(null)}}),[g]),c.a.useEffect((function(){if(s){var e=b(s.response.list);a(e)}}),[s]),c.a.useEffect((function(){if(n){var e=0;n.forEach((function(t){t.selected&&(e+=t.value)})),v(e)}}),[n]),x?Object(d.jsx)("p",{children:"Loading data"}):n.length?Object(d.jsx)(c.a.Fragment,{children:Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col",children:[Object(d.jsxs)("h1",{children:["Session flags: ",m]}),Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{style:{width:"250px"},children:"Flag"}),Object(d.jsx)("th",{children:"Value"})]})}),Object(d.jsx)("tbody",{children:n.map((function(e,t){return Object(d.jsxs)("tr",{className:"".concat(t%2===0?"even":"odd"),children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("input",{type:"checkbox",className:"form-check-input",id:"check-".concat(t),checked:e.selected,onChange:function(t){a(n.map((function(n){return n.value===e.value?Object(u.a)(Object(u.a)({},n),{},{selected:t.target.checked}):n})))}}),Object(d.jsx)("label",{className:"form-check-label",htmlFor:"check-".concat(t),children:e.name})]}),Object(d.jsx)("td",{className:"",children:e.value})]},"table-row-".concat(t))}))})]}),Object(d.jsx)("button",{onClick:function(){a(n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{selected:I})}))),S(!I)},children:"All toggle"}),Object(d.jsx)("button",{onClick:function(){C(prompt("Enter sum of flags for decoding."))},children:"Reverse sum"})]})})})}):Object(d.jsx)("p",{children:"Could not initiate application. Please try later."})},b=function(e){return e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{selected:!1})}))},E=function(e,t){if(e.length){var n=[];return JSON.parse(JSON.stringify(e)).reverse().forEach((function(e,a){e.value>0?t-e.value>=0&&0!==t&&(n.push(e.value),t-=e.value):t<0&&(n.push(e.value),t-=e.value)})),0===t?e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{selected:-1!==n.indexOf(e.value)})})):[]}},m=n(11),v=n(2),h=n(22),_=n.n(h),I=Object(m.b)({entities:v.entitiesReducer,queries:v.queriesReducer}),S=Object(m.c)(I,Object(m.a)(Object(v.queryMiddleware)(_.a,(function(e){return e.queries}),(function(e){return e.entities})))),A=(n(61),function(e){return e.queries});l.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(i.Provider,{store:S,children:Object(d.jsx)(r.Provider,{queriesSelector:A,children:Object(d.jsx)(f,{})})})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.46db728d.chunk.js.map